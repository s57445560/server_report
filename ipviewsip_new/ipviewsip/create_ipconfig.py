#!/usr/bin/python
# coding=utf8
# author: Sun yang

import os
os.environ.setdefault('DJANGO_SETTINGS_MODULE','ipviewsip.settings')
import django
django.setup()

bm_list = [
    {
        "政府事业部": {"国家平台": {
            "server": ['10.10.1.1', '10.10.1.10', '10.10.1.11', '10.10.1.12', '10.10.1.13', '10.10.1.14', '10.10.1.15',
                       '10.10.1.16',
                       '10.10.1.17', '10.10.1.18', '10.10.1.2', '10.10.1.3', '10.10.1.5', '10.10.1.6', '10.10.1.7',
                       '10.10.1.8',
                       '10.10.1.9', '10.10.6.1', '10.10.6.10', '10.10.6.11',
                       '10.10.6.12', '10.10.6.13', '10.10.6.14', '10.10.6.15', '10.10.6.16', '10.10.6.17', '10.10.6.2',
                       '10.10.6.21',
                       '10.10.6.22', '10.10.6.23', '10.10.6.24', '10.10.6.25', '10.10.6.26', '10.10.6.27', '10.10.6.3',
                       '10.10.6.30',
                       '10.10.6.31', '10.10.6.32', '10.10.6.33', '10.10.6.34', '10.10.6.35', '10.10.6.36', '10.10.6.4',
                       '10.10.6.5',
                       '10.10.6.50', '10.10.6.52', '10.10.6.54', '10.10.6.55', '10.10.6.56', '10.10.6.65', '10.10.6.66',
                       '10.10.6.67',
                       '10.10.6.75', '192.168.2.197', '10.11.3.2', '10.11.3.1', '10.11.3.6', '10.11.3.11', '10.11.3.5',
                       '10.11.3.105',
                       '10.11.3.104', '10.11.3.7', '10.11.3.106', '10.11.3.10', '10.11.3.103', '10.11.3.9', '10.11.3.3',
                       '10.11.3.8',
                       '10.11.3.4', '192.168.3.25', '192.168.2.195', '192.168.2.84', '192.168.2.51', '192.168.2.52'],
            "bigdata": ['10.10.11.1', '10.10.11.10', '10.10.11.100', '10.10.11.101', '10.10.11.102', '10.10.11.103',
                        '10.10.11.104', '10.10.11.105', '10.10.11.106', '10.10.11.107', '10.10.11.108', '10.10.11.109',
                        '10.10.11.11',
                        '10.10.11.110', '10.10.11.111', '10.10.11.112', '10.10.11.113', '10.10.11.114', '10.10.11.115',
                        '10.10.11.116',
                        '10.10.11.117', '10.10.11.118', '10.10.11.119', '10.10.11.12', '10.10.11.120', '10.10.11.121',
                        '10.10.11.122',
                        '10.10.11.123', '10.10.11.124', '10.10.11.125', '10.10.11.126', '10.10.11.127', '10.10.11.128',
                        '10.10.11.129',
                        '10.10.11.13', '10.10.11.130', '10.10.11.131', '10.10.11.132', '10.10.11.133', '10.10.11.134',
                        '10.10.11.135',
                        '10.10.11.136', '10.10.11.137', '10.10.11.138', '10.10.11.139', '10.10.11.14', '10.10.11.140',
                        '10.10.11.141',
                        '10.10.11.142', '10.10.11.143', '10.10.11.144', '10.10.11.145', '10.10.11.146', '10.10.11.147',
                        '10.10.11.148',
                        '10.10.11.149', '10.10.11.15', '10.10.11.150', '10.10.11.151', '10.10.11.152', '10.10.11.153',
                        '10.10.11.154',
                        '10.10.11.155', '10.10.11.156', '10.10.11.157', '10.10.11.158', '10.10.11.159', '10.10.11.16',
                        '10.10.11.160',
                        '10.10.11.161', '10.10.11.162', '10.10.11.163', '10.10.11.164', '10.10.11.165', '10.10.11.166',
                        '10.10.11.167',
                        '10.10.11.168', '10.10.11.169', '10.10.11.17', '10.10.11.170', '10.10.11.171', '10.10.11.172',
                        '10.10.11.173',
                        '10.10.11.174', '10.10.11.175', '10.10.11.176', '10.10.11.177', '10.10.11.178', '10.10.11.18',
                        '10.10.11.185',
                        '10.10.11.186', '10.10.11.187', '10.10.11.188', '10.10.11.189', '10.10.11.190', '10.10.11.191',
                        '10.10.11.192',
                        '10.10.11.193', '10.10.11.194', '10.10.11.195', '10.10.11.196', '10.10.11.197', '10.10.11.198',
                        '10.10.11.199',
                        '10.10.11.2', '10.10.11.200', '10.10.11.202', '10.10.11.203', '10.10.11.204', '10.10.11.205',
                        '10.10.11.206',
                        '10.10.11.207', '10.10.11.208', '10.10.11.209', '10.10.11.210', '10.10.11.211', '10.10.11.212',
                        '10.10.11.213',
                        '10.10.11.214', '10.10.11.215', '10.10.11.222', '10.10.11.223', '10.10.11.224', '10.10.11.225',
                        '10.10.11.226',
                        '10.10.11.227', '10.10.11.228', '10.10.11.229', '10.10.11.230', '10.10.11.231', '10.10.11.3',
                        '10.10.11.30',
                        '10.10.11.31', '10.10.11.32', '10.10.11.33', '10.10.11.34', '10.10.11.35', '10.10.11.36',
                        '10.10.11.4',
                        '10.10.11.5', '10.10.11.50', '10.10.11.51', '10.10.11.52', '10.10.11.53', '10.10.11.6',
                        '10.10.11.7',
                        '10.10.11.70', '10.10.11.71', '10.10.11.72', '10.10.11.73', '10.10.11.74', '10.10.11.75',
                        '10.10.11.76',
                        '10.10.11.77', '10.10.11.78', '10.10.11.79', '10.10.11.8', '10.10.11.80', '10.10.11.81',
                        '10.10.11.82',
                        '10.10.11.9', '10.10.11.90', '10.10.11.91', '10.10.11.92', '10.10.11.93', '10.10.11.94',
                        '10.10.11.95',
                        '10.10.11.96', '10.10.11.97', '10.10.11.98', '10.10.11.99']},

        },

    },
    {
        "IT运维": {"IT运维": {
            "server": ['10.10.7.1', '10.10.7.10', '10.10.7.2', '10.10.7.3', '10.10.7.4', '10.10.7.5', '10.10.7.6',
                       '192.168.2.153', '192.168.2.179', '192.168.2.182', '192.168.2.183', '192.168.2.192',
                       '192.168.2.193',
                       '192.168.2.69', '10.11.2.26', '10.11.2.27', '10.11.5.7', '10.11.5.10', '10.11.5.9', '10.11.5.8',
                       '10.11.8.1', '10.118.2', '10.11.8.3', '10.10.1.31', '10.10.1.41'], "bigdata": []}}

    },
    {
        "出行事业部": {"东风出行仿生测试环境": {"server": ["192.168.1.126", "192.168.1.127"],
                                 "bigdata": ["192.168.1.122", "192.168.1.124", "192.168.1.123"]},
                  "东风充电桩测试环境": {
                      "server": ["192.168.1.189", "192.168.1.190", "192.168.1.37", "192.168.1.42", "192.168.1.187",
                                 "192.168.1.188", "192.168.1.53", "192.168.1.128"], "bigdata": []},
                  "珠海测试": {
                      "server": ["192.168.1.125", "192.168.2.143", "192.168.1.130", "192.168.1.132", "192.168.1.131",
                                 "192.168.1.133"], "bigdata": []},
                  "天一机场": {"server": ["192.168.1.5", "192.168.1.6", "192.168.1.7"], "bigdata": []},
                  "隆瑞三优-压测": {
                      "server": ["10.11.10.1", "10.11.10.2", "10.11.10.3", "10.11.10.4", "10.11.10.5", "10.11.10.7", ],
                      "bigdata": []}
                  }
    },
    {
        "电池溯源事业部": {"测试环境": {
            "server": ["192.168.1.113", '10.10.30.1', '10.10.30.2', '10.10.30.3', '10.10.30.4', '10.10.30.5',
                       '10.10.30.6',
                       '10.10.30.8'], "bigdata": ["192.168.1.111", "192.168.1.112"]},
            "申龙环境": {"server": ["192.168.2.42"], "bigdata": []},
            "退役动力蓄电池交易平台": {"server": ["10.11.9.1", "10.11.9.2"], "bigdata": []},
            "线上环境": {"server": ['10.10.6.57', '10.10.6.58', '10.10.6.59', '10.10.6.71', '10.10.6.72', '10.10.6.73',
                                '10.10.6.74'], "bigdata": []}
        }
    },
    {
        "X计划事业部": {
            "潍柴-x计划": {"server": ["10.11.2.23", "10.11.2.24", "10.11.2.25", "10.11.2.40", "10.11.2.29", "10.11.2.30"],
                       "bigdata": ["10.11.2.1", "10.11.2.2", "10.11.2.3", "10.11.2.4", "10.11.2.5", "10.11.2.21",
                                   "10.11.2.22", "10.11.2.11", "10.11.2.12", "10.11.2.13", "10.11.2.14"]}},
    },
    {
        "车联网事业部": {"吉利预生产": {
            "server": ["10.86.161.82", "10.86.161.83", "10.86.161.84", "10.86.161.85", "10.86.160.115", "10.86.160.116",
                       "10.86.160.111", ], "bigdata": ["10.86.160.112", "10.86.160.113", "10.86.160.114"]},
            "企业平台研发环境": {
                "server": ["192.168.1.103", "192.168.1.104", "192.168.1.105", "192.168.1.89", "192.168.1.185"],
                "bigdata": ["192.168.1.101", "192.168.1.102", "192.168.1.106", "192.168.1.108", "192.168.1.109",
                            "192.168.1.107", "192.168.1.100"]},
            "企业平台2.2测试环境": {"server": ["192.168.1.114", "192.168.1.121"],
                            "bigdata": ["192.168.1.115", "192.168.1.116", "192.168.1.117", "192.168.1.118"]},
            "研发svn-git": {"server": ["192.168.1.20", "192.168.2.213"], "bigdata": []},
            "车联网测试环境": {
                "server": ["10.11.1.21", "10.11.1.22", "192.168.1.51", "192.168.1.55", "10.11.1.7", "10.11.1.8",
                           "10.11.1.9", "10.11.1.10", "10.11.1.11"],
                "bigdata": ["10.11.1.1", "10.11.1.2", "10.11.1.3"]},
            "车辆网2.3测试环境": {
                "server": ["10.11.6.1", "10.11.6.25", "10.11.6.26", "10.11.6.27", "10.11.6.28", "10.11.6.29"],
                "bigdata": ["10.11.6.1", "10.11.6.3", "10.11.6.4", "10.11.6.5", "10.11.6.6", "10.11.6.7",
                            "10.11.6.11", "10.11.6.11", "10.11.6.12", "10.11.6.13", "10.11.6.14", "10.11.6.15",
                            "10.11.6.16", "10.11.6.17", "10.11.6.18", "10.11.6.19", "10.11.6.20", "10.11.6.21",
                            "10.11.6.22", "10.11.6.23", "10.11.6.24"]},
            "托管平台": {"server": ["192.168.2.100", "192.168.2.101", "192.168.2.155"],
                     "bigdata": ["192.168.2.76", "192.168.2.77", "192.168.2.78", "192.168.2.79", "192.168.2.128",
                                 "192.168.2.129", "192.168.2.140", "192.168.2.141", "192.168.2.150"]},
            "托管国六": {"server": ["192.168.2.21", "192.168.2.22", "192.168.2.26", "192.168.2.27", "192.168.2.28",
                                "192.168.2.30", "192.168.2.31"],
                     "bigdata": ["192.168.2.23", "192.168.2.24", "192.168.2.25"]},
        }

    },
    {
        "大数据商业平台": {"大数据商业平台21网段": {"server": [],
                                    "bigdata": ["10.10.21.1", "10.10.21.2", '10.10.21.10', '10.10.21.11', '10.10.21.12',
                                                '10.10.21.13', '10.10.21.14', '10.10.21.17', '10.10.21.18',
                                                '10.10.21.19', '10.10.21.2', '10.10.21.20', '10.10.21.21',
                                                '10.10.21.22', '10.10.21.23', '10.10.21.24',
                                                '10.10.21.25', '10.10.21.3', '10.10.21.35', '10.10.21.36',
                                                '10.10.21.37', '10.10.21.38', '10.10.21.39',
                                                '10.10.21.4', '10.10.21.40', '10.10.21.41', '10.10.21.42',
                                                '10.10.21.43', '10.10.21.44', '10.10.21.45',
                                                '10.10.21.46', '10.10.21.47', '10.10.21.48', '10.10.21.49',
                                                '10.10.21.5', '10.10.21.50', '10.10.21.51',
                                                '10.10.21.52', '10.10.21.53', '10.10.21.54', '10.10.21.55',
                                                '10.10.21.56', '10.10.21.57', '10.10.21.58',
                                                '10.10.21.59', '10.10.21.6', '10.10.21.60', '10.10.21.61',
                                                '10.10.21.62', '10.10.21.63', '10.10.21.64',
                                                '10.10.21.65', '10.10.21.66', '10.10.21.67', '10.10.21.68',
                                                '10.10.21.69', '10.10.21.7', '10.10.21.70',
                                                '10.10.21.8']},
                    "大数据商业平台26网段": {
                        "server": ["10.10.26.3", "10.10.26.2", "10.10.26.4", "10.10.26.5", "10.10.26.6", "10.10.26.7",
                                   "10.10.26.11",
                                   "10.10.26.12", "10.10.26.13", "10.10.26.14", "10.10.26.15", "10.10.26.16",
                                   "10.10.26.17", "10.10.26.18",
                                   "10.10.26.19", "10.10.26.20", "10.10.26.21", "10.10.26.22", "10.10.26.23",
                                   "10.10.26.24", "10.10.26.25",
                                   "10.10.26.26", "10.10.26.27", "10.10.26.28", "10.10.26.29", "10.10.26.30",
                                   "10.10.26.31", "10.10.26.32",
                                   "10.10.26.33", "10.10.26.34", "10.10.26.35", "10.10.26.36", "10.10.26.37",
                                   "10.10.26.38", "10.10.26.39"],
                        "bigdata": []}
                    },
    },
    {
        "大数据联盟": {"创新大赛": {"server": ["10.11.4.20"], "bigdata": []}}
    },
    {
        "公司官网": {"公司官网": {"server": ["192.168.2.200"], "bigdata": []}}
    },
    {
        "总师办": {"测试环境": {"server": ["10.11.8.52", "10.11.8.53", "10.11.2.28"], "bigdata": []}}
    }
]

from ipdata import models

for b in bm_list:
    for k,v in b.items():
        print(k,v)
        b_obj = models.BusinessUnit.objects.filter(name=k)
        if b_obj:
            b_id = b_obj[0].id
        else:
            b_obj = models.BusinessUnit.objects.create(name=k)
            b_id = b_obj.id

        for v_k,v_v in v.items():
            v_obj = models.Environment.objects.filter(name=v_k,to_b_id=b_id)
            if v_obj:
                e_id = v_obj[0].id
            else:
                e_id = models.Environment.objects.create(name=v_k,to_b_id=b_id).id

            for s_ip in v_v["server"]:
                ip_config_obj = models.IpConfig.objects.filter(ip=s_ip)
                if ip_config_obj:
                    pass
                else:
                    models.IpConfig.objects.create(ip=s_ip,env_id=e_id,type=0)

            for big_ip in v_v["bigdata"]:
                ip_config_obj = models.IpConfig.objects.filter(ip=big_ip)
                if ip_config_obj:
                    pass
                else:
                    models.IpConfig.objects.create(ip=big_ip,env_id=e_id,type=1)



