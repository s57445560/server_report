webpackJsonp([1],{Kelm:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-top":"0"},attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},s,!1,function(t){a("Kelm")},null,null).exports,n=a("/ocq"),i={components:{ElCol:a("kMct").a},name:"el-aside",data:function(){return{url:"5",status:0}},methods:{handleOpen:function(t,e){this.status=t},handleClose:function(t,e){console.log(t,e)},show:function(t,e,a){this.$router.push({path:"/report"}),this.$store.dispatch("get_ip_list",{e:t,b:a,id:e}),this.$store.dispatch("get_all_list",{e:t,b:a,id:e})},home:function(){this.$router.push({path:"/"}),this.$store.dispatch("get_home")}},computed:{base_list:function(){return this.$store.state.Base.tableData},Index:function(){return this.$store.state.Base.ID}},created:function(){this.url=this.$route.path,this.$store.dispatch("base_list"),"/"===this.$route.path?this.$store.commit("set_id","/"):this.$cookies.isKey("ID")&&this.$store.commit("set_id",this.$cookies.get("ID"))}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-menu",{staticStyle:{position:"absolute",bottom:"0",top:"60px",width:"200px",left:"0px"},attrs:{"background-color":"#545c64","default-active":t.Index,"text-color":"#fff","active-text-color":"#ffd04b","unique-opened":"",align:"left"},on:{open:t.handleOpen,close:t.handleClose}},[a("el-menu-item",{attrs:{index:"/"},on:{click:function(e){return t.home()}}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页信息")])]),t._v(" "),t._l(t.base_list,function(e,l){return a("el-submenu",{key:l,attrs:{index:e.name}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),t._v(t._s(e.name))]),t._v(" "),t._l(e.e_list,function(l,s){return a("el-menu-item-group",{key:s},[a("el-menu-item",{attrs:{index:l[0]},on:{click:function(a){return t.show(l[1],l[0],e.name)}}},[t._v(t._s(l[1]))])],1)})],2)})],2)],1)},staticRenderFns:[]};var c=a("VU/8")(i,r,!1,function(t){a("cvEz")},"data-v-d4449e10",null).exports,p={name:"report",data:function(){return{msg:"报表服务",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},Time:"",colors:[{color:"#6f7ad3",percentage:20},{color:"#1989fa",percentage:40},{color:"#5cb87a",percentage:60},{color:"#e6a23c",percentage:80},{color:"#f56c6c",percentage:100}],table:!1,dialog:!1,loading:!1}},methods:{filterTag:function(t,e){return"service"===t.type?"服务":"大数据"},download:function(){this.$store.dispatch("download",{timestrap:this.Time})},filter_time:function(){var t=this.$cookies.get("Title").split("/");this.$store.dispatch("get_ip_list",{b:t[0],e:t[1],timestrap:this.Time}),this.$store.dispatch("get_all_list",{b:t[0],e:t[1],timestrap:this.Time})},filter_m_rate:function(t,e){return t.memoryrate+"%"},filter_d_rate:function(t,e){return t.diskrate+"%"},handleCurrentChange:function(t){console.log("当前页: "+t);var e=this.$cookies.get("Title").split("/");this.$store.dispatch("get_ip_list",{b:e[0],e:e[1],page:t,timestrap:this.Time})}},computed:{title_list:function(){return this.$store.state.Base.Title},get_ip:function(){return this.$store.state.Base.Ip},get_loading:function(){return this.$store.state.Base.loading},get_b_loading:function(){return this.$store.state.Base.b_loading},get_all:function(){return this.$store.state.Base.All}},created:function(){var t=this.$cookies.get("Title").split("/");this.$store.dispatch("get_ip_list",{b:t[0],e:t[1]}),this.$store.dispatch("get_all_list",{b:t[0],e:t[1]}),this.$cookies.isKey("Title")&&this.$store.commit("set_title",this.$cookies.get("Title"))}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("i",{staticClass:"el-icon-s-platform"}),t._v("服务器总数量："+t._s(t.get_ip.servertotalcount)+"\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("i",{staticClass:"el-icon-s-platform"}),t._v("物理机数量："+t._s(t.get_ip.phycount)+"\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"always"}},[a("i",{staticClass:"el-icon-s-platform"}),t._v("虚拟机数量："+t._s(t.get_ip.vircount)+"\n      ")])],1)],1),t._v(" "),a("el-col",{staticStyle:{"padding-top":"15px"}},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.get_loading,expression:"get_loading"}],attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:t.title_list}},[a("el-row",{staticStyle:{"padding-bottom":"8px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("选择查看日期")]),t._v(" "),a("el-date-picker",{attrs:{align:"right",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.Time,callback:function(e){t.Time=e},expression:"Time"}})],1)]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.filter_time}},[t._v("搜索")])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download",loading:t.get_b_loading},on:{click:t.download}},[t._v("生成报表")])],1),t._v(" "),a("el-col",{attrs:{span:5,offset:3}},[a("div",{attrs:{align:"center"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.table=!0}}},[t._v("查看服务器详情")])],1)])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"padding-bottom":"8px"},attrs:{span:12}},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"服务内存使用情况",type:"success",effect:"dark",center:"",closable:!1}}),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          总量M\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          使用量M\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.service.memorytotal)+"\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.service.memoryuse)+"\n                        ")])],1)])],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"大数据内存使用情况",type:"success",center:"",effect:"dark",closable:!1}}),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          总量M\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          使用量M\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.bigdata.memorytotal)+"\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.bigdata.memoryuse)+"\n                        ")])],1)])],1)],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"padding-bottom":"8px"},attrs:{span:12}},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"服务据磁盘使用情况",type:"warning",center:"",effect:"dark",closable:!1}}),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          总量G\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          使用量G\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.service.disktotal)+"\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.service.diskuse)+"\n                        ")])],1)])],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"大数据磁盘使用情况",type:"warning",center:"",effect:"dark",closable:!1}}),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          总量G\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:"info"}},[t._v("\n                          使用量G\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.bigdata.disktotal)+"\n                        ")])],1)]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"8px","padding-bottom":"8px"},attrs:{span:12}},[a("div",{attrs:{align:"center"}},[a("el-tag",{attrs:{type:""}},[t._v("\n                          "+t._s(t.get_all.all.bigdata.diskuse)+"\n                        ")])],1)])],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"服务内存使用率",type:"success",center:"",effect:"dark",closable:!1}}),t._v(" "),a("div",{staticStyle:{"padding-top":"8px"},attrs:{align:"center"}},[a("el-progress",{attrs:{type:"dashboard",percentage:t._f("number")(t.get_all.all.service.memoryrate),color:t.colors}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"大数据内存使用率",type:"success",center:"",effect:"dark",closable:!1}}),t._v(" "),a("div",{staticStyle:{"padding-top":"8px"},attrs:{align:"center"}},[a("el-progress",{attrs:{type:"dashboard",percentage:t._f("number")(t.get_all.all.bigdata.memoryrate),color:t.colors}})],1)],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"服务磁盘使用率",type:"warning",center:"",effect:"dark",closable:!1}}),t._v(" "),a("div",{staticStyle:{"padding-top":"8px"},attrs:{align:"center"}},[a("el-progress",{attrs:{type:"dashboard",percentage:t._f("number")(t.get_all.all.service.diskrate),color:t.colors}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"大数据磁盘使用率",type:"warning",center:"",effect:"dark",closable:!1}}),t._v(" "),a("div",{staticStyle:{"padding-top":"8px"},attrs:{align:"center"}},[a("el-progress",{attrs:{type:"dashboard",percentage:t._f("number")(t.get_all.all.bigdata.diskrate),color:t.colors}})],1)],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("el-drawer",{attrs:{title:"服务器详情!",visible:t.table,direction:"rtl",size:"89%"},on:{"update:visible":function(e){t.table=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.get_loading,expression:"get_loading"}],attrs:{data:t.get_ip.IP,stripe:"",border:"",size:"mini"}},[a("el-table-column",{attrs:{property:"name",label:"IP",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"memorytotal",label:"内存总量/M"}}),t._v(" "),a("el-table-column",{attrs:{property:"memoryuse",label:"内存使用量/M"}}),t._v(" "),a("el-table-column",{attrs:{property:"memoryrate",label:"内存使用率",formatter:t.filter_m_rate}}),t._v(" "),a("el-table-column",{attrs:{property:"cpucore",label:"cpu核数"}}),t._v(" "),a("el-table-column",{attrs:{property:"averageload",label:"平均load"}}),t._v(" "),a("el-table-column",{attrs:{property:"disktotal",label:"磁盘总量/G"}}),t._v(" "),a("el-table-column",{attrs:{property:"diskuse",label:"磁盘使用量/G"}}),t._v(" "),a("el-table-column",{attrs:{property:"diskrate",label:"磁盘使用率",formatter:t.filter_d_rate}}),t._v(" "),a("el-table-column",{attrs:{property:"servertype",label:"服务器类型"}}),t._v(" "),a("el-table-column",{attrs:{property:"type",label:"所属环境",formatter:t.filterTag}})],1),t._v(" "),a("div",{staticStyle:{"padding-top":"8px"},attrs:{align:"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.get_ip.servertotalcount},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(p,d,!1,function(t){a("lcHN")},"data-v-0726dd40",null).exports,g={name:"HelloWorld",data:function(){return{msg:"home"}},methods:{},computed:{},created:function(){},components:{Aside:c,Report:u}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-header",{staticStyle:{"background-color":"#409EFF"}},[e("el-row",[e("el-col",{attrs:{span:5}},[e("h2",{staticStyle:{color:"white","font-family":"Microsoft YaHei","margin-top":"15px"},attrs:{align:"left"}},[e("i",{staticClass:"el-icon-menu"}),this._v("\n                    服务器资源报表\n                ")])])],1)],1),this._v(" "),e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("Aside")],1),this._v(" "),e("el-main",{staticStyle:{"padding-left":"2px"},attrs:{align:"left"}},[e("router-view")],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(g,_,!1,function(t){a("R4di")},"data-v-d0070d8e",null).exports,f={name:"Main",data:function(){return{msg:"主页面"}},computed:{get_home_s:function(){return this.$store.state.Base.Home}},methods:{},created:function(){console.log(this.baseConfig,"111111111111111"),this.$store.dispatch("get_home")}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"always"}},[a("i",{staticClass:"el-icon-s-platform"}),t._v("服务器总数量："+t._s(t.get_home_s.ip_all)+"\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"always"}},[a("i",{staticClass:"el-icon-s-platform"}),t._v("环境总数量："+t._s(t.get_home_s.e_all)+"\n      ")])],1)],1),t._v(" "),a("div",{staticStyle:{height:"400px","padding-top":"8px"},attrs:{id:"container"}})],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(t){a("nlJn")},"data-v-3c9865bc",null).exports;l.default.use(n.a);var b=new n.a({routes:[{path:"",name:"home",component:m,children:[{path:"/",name:"main",component:h},{path:"/report",name:"report",component:u}]}],mode:"history"}),y=a("zL8q"),x=a.n(y),w=(a("tvR6"),a("NYxO")),k=a("mtWM"),$=a.n(k),S=a("ppUw"),C=a.n(S),T=a("XLwt"),I=a.n(T),D={state:{tableData:{},Title:"",ID:"/",loading:!1,b_loading:!1,All:{all:{service:{memorytotal:0,memoryuse:0,memoryrate:0,disktotal:0,diskuse:0,diskrate:0},bigdata:{memorytotal:0,memoryuse:0,memoryrate:0,disktotal:0,diskuse:0,diskrate:0}}},Ip:{phycount:0,servertotalcount:0,vircount:0},Home:{ip_all:0,e_all:0}},actions:{base_list:function(t){t.state;var e=t.commit;t.rootState;l.default.http.get(l.default.baseConfig.request_url+"/api/v1/base_info",{}).then(function(t){e("set_base_list",t.data),console.log(t.data)})},get_ip_list:function(t,e){t.state;var a=t.commit;t.rootState;a("set_loading",!0),C.a.set("Title",e.b+"/"+e.e),e.id&&(C.a.set("ID",e.id),a("set_id",e.id)),a("set_title",e.b+"/"+e.e),l.default.http.get(l.default.baseConfig.request_url+"/api/v1/ip_info",{params:e}).then(function(t){console.log(t.data),a("set_ip",t.data),a("set_loading",!1)})},get_all_list:function(t,e){t.state;var a=t.commit;t.rootState;l.default.http.get(l.default.baseConfig.request_url+"/api/v1/all_info",{params:e}).then(function(t){console.log(t.data),a("set_all",t.data)})},download:function(t,e){t.state;var a=t.commit;t.rootState;a("set_b_loading",!0),l.default.http.get(l.default.baseConfig.request_url+"/api/v1/download",{params:e,responseType:"blob"}).then(function(t){if(console.log(t),"application/json"===t.data.type)console.log("没有"),window.app.$message.error("此日期下没有报表"),a("set_b_loading",!1);else{a("set_b_loading",!1);var e=window.URL.createObjectURL(new Blob([t.data])),l=document.createElement("a");l.style.display="none",l.href=e;(new Date).getTime();l.download="ipdatas.xlsx",document.body.appendChild(l),l.click()}})},get_home:function(t,e){var a=t.state,s=t.commit;t.rootState;l.default.http.get(l.default.baseConfig.request_url+"/api/v1/home",{params:e}).then(function(t){console.log(t.data,"拿到数据"),s("set_home",t.data),l.default.echarts.init(document.getElementById("container")).setOption({title:{text:"各事业部使用服务器数量"},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:a.Home.b_list,axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:-15}}],yAxis:[{type:"value"}],series:[{name:"服务器数量",type:"bar",barWidth:"60%",data:a.Home.b_n_list,itemStyle:{normal:{label:{show:!0,position:"top",textStyle:{color:"black",fontSize:16}}}}}]})})}},mutations:{set_base_list:function(t,e){t.tableData=e},set_b_loading:function(t,e){t.b_loading=e},set_title:function(t,e){t.Title=e,console.log(e,"test")},set_loading:function(t,e){t.loading=e},set_id:function(t,e){t.ID=e},set_ip:function(t,e){t.Ip=e},set_all:function(t,e){t.All=e},set_home:function(t,e){t.Home=e}}};l.default.config.productionTip=!1,l.default.use(x.a),l.default.use(w.a),l.default.prototype.$http=$.a,l.default.http=$.a,l.default.use(C.a),l.default.prototype.$echarts=I.a,l.default.echarts=I.a;var M=n.a.prototype.push;n.a.prototype.push=function(t){return M.call(this,t).catch(function(t){return t})};window.location.host;var B=new w.a.Store({state:{request_url:""},mutations:{},actions:{},modules:{Base:D}});l.default.filter("number",function(t){return Number(t)}),$.a.get("./static/project.config.json").then(function(t){console.log(t.data),l.default.prototype.baseConfig=t.data,l.default.baseConfig=t.data;new l.default({el:"#app",router:b,store:B,components:{App:o},template:"<App/>"})}),window.app=app},R4di:function(t,e){},cvEz:function(t,e){},lcHN:function(t,e){},nlJn:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6d4d44f154f5f6cbb1ef.js.map